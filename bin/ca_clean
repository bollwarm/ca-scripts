#!/bin/sh
# Remove all files and directories that the scripts have created. Start with
# a clean state.

source config/globals

verbose=false

function usage() {
    echo "Usage: $0 [-h|--help] [-v|--verbose]"
}

if [ $# -ge 1 ]; then
    if [[ "x$1" == "x--help" || "x$1" == "x-h" ]]; then
        echo "Clean all filles that have been created by CA scripts."
        usage
        echo "  -h, --help        Display this help message."
        echo "  -v, --verbose     Be more vebose."
    elif [[ "x$1" == "x-v" || "x$1" == "x--verbose" ]]; then
        verbose=true;
    else
        usage
    fi
fi

for i in $ROOT_CA_DIRS $ROOT_CA_FILES $INTERMEDIATE_CA_PATH
do
    if [[ "$verbose" == true && -e "$i" ]]; then
        echo "Removing $i\c"

        if [ -d "$i" ]; then
            echo "/\c";
        fi

        echo
    fi

	rm -rf $i
done

rm -f *.old *.attr
